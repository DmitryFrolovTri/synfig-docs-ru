import useBaseUrl from '@docusaurus/useBaseUrl';

# Сглаживание

![](</img/gitbook/image (19).png>)

Слой "Сграживание" используется для сглаживания всех слоев под ним.

Это требуется не часто, поскольку большинство слоев уже обеспечивают плавный вывод.

Вы указываете параметры ширины и высоты. Внутри сцена визуализируется в &lt;ширину&gt; раз шире и в &lt;высоту&gt; раз выше выходного изображения, а затем каждый блок &lt;ширины&gt; по &lt;высоте&gt; усредняется до одного пикселя.

:::info
Стоит учесть, что результат сглаживания видно только после рендера, во время редактирования результат воздействия слоя на рабочей области не отображается.&#x20;
:::

\
Вы указываете параметры ширины и высоты. Внутри сцена визуализируется в &lt;ширину&gt; раз шире и в &lt;высоту&gt; раз выше выходного изображения, а затем каждый блок &lt;ширины&gt; по &lt;высоте&gt; усредняется до одного пикселя.

Например, выходное изображение имеет размер 320x240 пикселей, для параметров ширины и высоты слоя суперсэмплов установлено значение по умолчанию 2. Synfig отрендерит внутренне изображение размером 640x480, а затем усреднит 4 пикселя в каждом блоке 2x2 до одного пикселя, который затем будет использоваться в выходном изображении.

Здесь показано увеличенное изображение контура с отключенным сглаживанием и без слоя суперсэмплов:

[![Изображение: Суперсэмпловый слой-отсутствует.png](/assets/wiki.synfig.org_File_Supersample-none_c406cefab149.png)](/assets/wiki.synfig.org_File_Supersample-none_c406cefab149.png)

Флажок "Использовать параметрический" позволяет использовать [Параметрический рендеринг](https://wiki.synfig.org/index.php?title=Parametric\_renderer\&action=edit\&redlink=1) вместо стандартного [Ускоренный рендеринг](https://wiki.synfig.org/index.php?title=Accelerated\_renderer\&action=edit\&redlink=1).

Параметр  "Не затрагивать прозрачность" позволяет процессу усреднения знать об альфа-канале. При вклченой галочке "Не затрагивать прозрачность" среднее значение равно sum(цвет \* альфа) / sum (альфа), с альфа-значением sum (альфа) / sum(1). Если галочка убрана у параметра "Не затрагивать прозрачность",то среднее значение равно просто сумме (цвет) / sum(1).

Например, рассмотрим усреднение двух пикселей, один из которых полностью прозрачный синий (R: 0 G: 0 B: 1 A: 0), а другой непрозрачный красный (R: 1 G: 0 B: 0 A: 1). При альфа-безопасности среднее значение равно (R: 1 G: 0 B: 0 A:0.5). При небезопасности в альфа-режиме среднее значение равно (R:0.5 G: 0 B:0.5 A:0.5).

Это тот же контур, что и раньше, но поверх него нанесен слой супер-сэмплов. На этот раз включена функция "Не затрагивать прозрачность":

[![Изображение: Supersample-safe.png](/assets/wiki.synfig.org_File_Supersample-safe_aaf2f5d3c3ba.png)](/assets/wiki.synfig.org_File_Supersample-safe_aaf2f5d3c3ba.png)

И на этом слое нет надписи "Be Alpha Safe". Фон ярко-синий, но с очень низкой альфа-частотой. Края намного синее, чем они были бы, если бы учитывалась альфа:

[![Изображение: Суперсэмпловый слой-unsafe.png](/assets/wiki.synfig.org_File_Supersample-unsafe_3d03a8aa0c03.png)](/assets/wiki.synfig.org_File_Supersample-unsafe_3d03a8aa0c03.png)

Стоит отметить, что слой суперсэмплов отключается, когда параметр "качество" равен 10 или выше. Во время редактирования качество равно 10.

Если вы хотите увидеть пример того, что делает Super Sample, создайте контур и отключите его параметр сглаживания. Он будет выглядеть неровным по краям. Добавьте слой супер-образца поверх него, сохраните файл и визуализируйте его в виде изображения. Визуализация с помощью файла 'synfig -Q 10.sif' оставит на нем неровности, а 'файл synfig -Q 9.sif' сделает его более гладким.

**Примеры**

<figure><img src={useBaseUrl('/img/gitbook/image (12).png')} alt="" /><figcaption><p>ширина= 1 высота = 1</p></figcaption></figure>

То же самое без слоя "Сглаживание"



<figure><img src={useBaseUrl('/img/gitbook/image (13).png')} alt="" /><figcaption><p>ширина = 2 высота = 2</p></figcaption></figure>

обратите внимание, что для сглаживания используется только один промежуточный цвет в самом нижнем правом углу.



<figure><img src={useBaseUrl('/img/gitbook/image (14).png')} alt="" /><figcaption><p>ширина = 3 высота = 3</p></figcaption></figure>

Теперь используются два промежуточных цвета, и результат получается более плавным



<figure><img src={useBaseUrl('/img/gitbook/image (15).png')} alt="" /><figcaption><p>ширина = 4 высота = 4</p></figcaption></figure>

Это выглядит неплохо, но слой суперсэмплов размером 4x4 увеличивает время рендеринга в 16 раз



<figure><img src={useBaseUrl('/img/gitbook/image (16).png')} alt="" /><figcaption><p>ширина = 4, высота = 1</p></figcaption></figure>

Вертикальные линии ровные, горизонтальные - неровные



<figure><img src={useBaseUrl('/img/gitbook/image (17).png')} alt="" /><figcaption><p>ширина = 1, высота = 4</p></figcaption></figure>

Горизонтальные линии ровные, вертикальные - неровные